apiVersion: 1

datasources:
  # --- Datasource de Métricas ---
  - name: Prometheus
    type: prometheus
    access: proxy
    orgId: 1
    # 'http://prometheus:9090' usa el nombre del servicio de Docker
    url: http://prometheus.railway.internal:9090
    isDefault: true

  # --- Datasource de Trazas ---
  - name: Tempo
    type: tempo
    access: proxy
    orgId: 1
    url: http://tempo.railway.internal:3200 # Puerto interno de Tempo
  - name: Loki
    type: loki
    access: proxy
    rgId: 1
    url: http://loki.railway.internal:3100
    uid: loki-ds
    isDefault: false
    jsonData: # <--- Agrega esto para mejorar la vinculación
      derivedFields:
        - datasourceUid: Tempo
          matcherRegex: "traceId=(\\w+)"
          name: TraceID
          url: "$${__value.raw}"
